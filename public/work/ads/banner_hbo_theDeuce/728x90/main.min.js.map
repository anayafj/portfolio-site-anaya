{"version":3,"sources":["dc_core.js","bltFramework.js","main.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AChDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC3jBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"vendor/main.min.js","sourcesContent":["/** DOUBLECLICK CORE FUNCTIONS\n ********************************************************************************************/\n\n\n/** PRE INIT **********************************************/\nfunction initVendor () {\n    // init DoubleClick\n    if ( Enabler.isInitialized() ) vendorReady();\n    else Enabler.addEventListener ( studio.events.StudioEvent.INIT, vendorReady );\n}\n\n/** INIT *************************************************/\nfunction vendorReady () {\n    console.info ('DOUBLECLICK API INITIALIZING');\n    addListeners ();\n\n    // polite load\n    if ( Enabler.isPageLoaded() ) pageLoadedHandler();\n    else Enabler.addEventListener (studio.events.StudioEvent.PAGE_LOADED, pageLoadedHandler);\n}\n\n/** PAGE LOADED *****************************************/\nfunction pageLoadedHandler () {\n    if ( Enabler.isVisible() ) adVisible();\n    else Enabler.addEventListener (studio.events.StudioEvent.VISIBLE, adVisible);\n}\n\n/** AD VISIBLE *****************************************/\nfunction adVisible () {\n    // ad visible ... dispatch READY event\n    dispatchEvent (BLT.Events.AD_READY);\n}\n\n/** LISTENERS *****************************************/\nfunction addListeners () {\n\n    // DoubleClick events\n    Enabler.addEventListener (studio.events.StudioEvent.EXIT, onExitHandler);\n}\n\n\n\n/***********************************************************************************************\n * EXIT CLEANUP\n **********************************************************************************************/\nfunction onExitHandler (event) {\n    dispatchEvent (BLT.Events.KILL_VIDEO);\n}\n","var BLT = BLT || {};\n\nBLT.initFramework = function () {\n    console.info ('BLT AD FRAMEWORK : version 1.4');\n};\n\n// startup\nwindow.onload = BLT.initFramework();\n\n\n/** FRAMEWORK DEPENDENCIES\n **********************************************************/\n\n/** BLT EVENTS\n **********************************************************/\n\n// polyfill fix for IE (adds custom events to IE)\n(function () {\n    function CustomEvent ( event, params ) {\n        params = params || { bubbles: false, cancelable: false, detail: undefined };\n        var evt = document.createEvent ( 'CustomEvent' );\n        evt.initCustomEvent ( event, params.bubbles, params.cancelable, params.detail );\n        return evt;\n    }\n\n    CustomEvent.prototype = window.Event.prototype;\n    window.CustomEvent = CustomEvent;\n})();\n\n\nBLT.Events = {\n\n    /** AD EVENTS\n     *************************************************************/\n    AD_READY:                   new CustomEvent ('adReady'),\n\n    CLOSE_AD:                   new CustomEvent ('closeAd'),\n    COLLAPSE_AD:                new CustomEvent ('collapseAd'),\n    COLLAPSE_START:             new CustomEvent ('collapseStart'),\n    COLLAPSE_FINISH:            new CustomEvent ('collapseFinish'),\n\n    EXPAND_AD:                  new CustomEvent ('expandAd'),\n    EXPAND_START:               new CustomEvent ('expandStart'),\n    EXPAND_FINISH:              new CustomEvent ('expandFinish'),\n\n    REPLAY_AD:                  new CustomEvent ('replayAd'),\n    PARSE_DATES:                new CustomEvent ('parseDates'),\n\n\n    /** VIDEO EVENTS\n     *************************************************************/\n    // status events\n    VIDEO_LOADED:               new CustomEvent ('videoLoaded'),\n    VIDEO_LOAD_PROGRESS:        new CustomEvent ('videoLoadProgress'),\n    VIDEO_READY:                new CustomEvent ('videoReady'),\n    VIDEO_COMPLETE:             new CustomEvent ('videoComplete'),\n    VIDEO_STARTED:              new CustomEvent ('videoStarted'),\n    VIDEO_PLAYING:              new CustomEvent ('videoPlaying'),\n    VIDEO_PAUSED:               new CustomEvent ('videoPaused'),\n    VIDEO_RESUMED:              new CustomEvent ('videoResumed'),\n    VIDEO_REPLAYING:            new CustomEvent ('videoReplaying'),\n    VIDEO_MUTED:                new CustomEvent ('videoMuted'),\n    VIDEO_UNMUTED:              new CustomEvent ('videoUnmuted'),\n    VIDEO_ERROR:                new CustomEvent ('videoError'),\n    VIDEO_ON_CUEPOINT:          new CustomEvent ('videoCuepoint'),\n\n    // buffer events\n    VIDEO_BUFFER_EMPTY:         new CustomEvent ('videoBufferEmpty'),\n    VIDEO_BUFFER_FULL:          new CustomEvent ('videoBufferFull'),\n    VIDEO_SHOW_BUFFER:          new CustomEvent ('videoShowBuffer'),\n    VIDEO_HIDE_BUFFER:          new CustomEvent ('videoHideBuffer'),\n\n    // progress events\n    VIDEO_PROGRESS:             new CustomEvent ('videoProgress'),\n    VIDEO_0_PERCENT:            new CustomEvent ('video 0% complete'),\n    VIDEO_25_PERCENT:           new CustomEvent ('video 25% complete'),\n    VIDEO_50_PERCENT:           new CustomEvent ('video 50% complete'),\n    VIDEO_75_PERCENT:           new CustomEvent ('video 75% complete'),\n    VIDEO_100_PERCENT:          new CustomEvent ('video 100% complete'),\n\n    // controls\n    MUTE_VIDEO:                 new CustomEvent ('muteVideo'),\n    UNMUTE_VIDEO:               new CustomEvent ('unmuteVideo'),\n    PLAY_VIDEO:                 new CustomEvent ('playVideo'),\n    PAUSE_VIDEO:                new CustomEvent ('pauseVideo'),\n    REPLAY_VIDEO:               new CustomEvent ('replayVideo'),\n    SEEK_VIDEO:                 new CustomEvent ('seekVideo'),\n    KILL_VIDEO:                 new CustomEvent ('killVideo'),\n    HIDE_CONTROLS:              new CustomEvent ('hideControls'),\n    SHOW_CONTROLS:              new CustomEvent ('showControls'),\n\n    // fullscreen events\n    VIDEO_FULLSCREEN_OPENED:    new CustomEvent ('fullScreenOpened'),\n    VIDEO_FULLSCREEN_CLOSED:    new CustomEvent ('fullScreenClosed'),\n    SHOW_FULLSCREEN:            new CustomEvent ('showFullscreen'),\n    EXIT_FULLSCREEN:            new CustomEvent ('exitFullscreen')\n};\n\n\n/** BLT TUNEIN CLASS\n **********************************************************/\n\nBLT.Tunein = BLT.Tunein || {};\n\nBLT.Tunein.dates = [];\nBLT.Tunein.today = new Date();\nBLT.Tunein.currentTunein = new Date();\nBLT.Tunein.currentID = undefined;\nBLT.Tunein.isProxy = false;\n\n\nBLT.Tunein.addDate = function (year, month, day, id ) {\n    if (!BLT.Tunein.dates) BLT.Tunein.dates = [];\n    var date = new Date (year, month -1, day);\n    date.id = id;\n    BLT.Tunein.dates.push (date);\n};\n\n\nBLT.Tunein.parseDates = function (year, month, day ) {\n    if (BLT.Tunein.errorCheck()) return;\n\n    BLT.Tunein.isProxy = false;\n\n    // if date value for comparison if passed (for testing)\n    if (year && month && day) {\n        // will use proxy date for testing\n        BLT.Tunein.today = new Date (year, month -1, day);\n        BLT.Tunein.isProxy = true;\n    }\n\n    BLT.Tunein.sortDec (BLT.Tunein.dates);\n    BLT.Tunein.currentTunein = BLT.Tunein.today;\n    BLT.Tunein.currentID = 'default';\n\n    // determine correct Tunein\n    for (var i in BLT.Tunein.dates) {\n        if (BLT.Tunein.today >= BLT.Tunein.dates[i]) {\n            BLT.Tunein.currentID = BLT.Tunein.dates[i].id;\n            BLT.Tunein.currentTunein = BLT.Tunein.dates[i];\n            break;\n        }\n    }\n\n    dispatchEvent (BLT.Events.PARSE_DATES);\n\n    // display the results\n    BLT.Tunein.displayCurrentDate();\n};\n\n\n// sort date array ascending\nBLT.Tunein.sortAsc = function (dateArray) {\n    dateArray.sort (function (a, b) {\n        a = new Date ( a.getTime() );\n        b = new Date ( b.getTime() );\n        return a < b ? -1 : a > b ? 1 : 0;\n    });\n};\n\n\n// sort date array descending\nBLT.Tunein.sortDec = function (dateArray) {\n    dateArray.sort (function (a, b) {\n        a = new Date ( a.getTime() );\n        b = new Date ( b.getTime() );\n        return a > b ? -1 : a < b ? 1 : 0;\n    });\n};\n\n\n/** CONSOLE LOG FOR TESTING **/\n// displays all dates in the console window (for testing)\nBLT.Tunein.displayDates = function () {\n    if (BLT.Tunein.errorCheck()) return;\n\n    var revDates = BLT.Tunein.dates.slice(0); // clone\n    BLT.Tunein.sortAsc (revDates);\n\n    for (var x in revDates) {\n        console.info ( revDates[x].id, '--> ', revDates[x].toLocaleDateString() );\n    }\n\n    // display the results\n    BLT.Tunein.displayCurrentDate();\n};\n\n\n// displays current dates in console window (for testing)\nBLT.Tunein.displayCurrentDate = function () {\n    var outputString;\n    BLT.Tunein.isProxy ? outputString = 'CURRENT TUNEIN (USING PROXY):' : outputString = 'CURRENT TUNEIN:';\n\n    console.info (outputString, BLT.Tunein.currentID, '-->', BLT.Tunein.currentTunein.toLocaleDateString() );\n};\n\n\n// ERROR CHECKING\nBLT.Tunein.errorCheck = function () {\n    if (BLT.Tunein.dates.length === 0) {\n        console.info ('<<< Tunein cannot be parsed. Use BLT.Tunein.addDate to add date values');\n        return 1;\n    }\n    else return 0; // no error\n};\n\n\n\n/** BLT HELPER METHODS\n **********************************************************/\n\n/** LOAD EXTERNAL JAVASCRIPT **/\nvar loadScript = function (scriptURL, callback)  {\n    var script = document.createElement(\"script\");\n    script.type = \"text/javascript\";\n\n    if (script.readyState){  // IE, incl. IE9\n        script.onreadystatechange = function(){\n            if (script.readyState === \"loaded\" || script.readyState === \"complete\"){\n                script.onreadystatechange = null;\n                callback();\n            }\n        };\n    } else {  // others\n        script.onload = callback;\n    }\n\n    script.src = scriptURL;\n    document.body.appendChild (script);\n};\n\n\n/** ADD CLASS **/\nvar addClass = function ($el, className) {\n    var attr = $el.getAttribute ('class') || '';  // default to empty string\n    var classList = attr.split (' ');\n\n    for (var i = 0; i < classList.length; i++) {\n        if (classList[i] === className) return;\n    }\n\n    classList.push (className);\n    $el.setAttribute ('class', classList.join(' '));\n};\n\n\n/** REMOVE CLASS **/\nvar removeClass = function (element, className) {\n    var Element = (typeof element === 'string') ? _getElement(element) : element;\n    var classNames = Element.className;\n\n    // Clean up Class Names\n    classNames = classNames.replace(className, '');\n    classNames = classNames.replace(/\\s{2,}/g, ' ').replace(/^ +/gm, '').replace(/\\s+$/, '');\n\n    // Update Class Names\n    Element.className = classNames;\n};\n\n\n/** GET ELEMENT **/\nvar getEl = function ($id) {\n    return document.getElementById ($id);\n};\n\n\n// Get Element by class\nvar getElClass = function ($id) {\n    return document.getElementsByClassName($id);\n};\n\n/** SHOW ELEMENT **/\nvar show = function ($element) {\n    $element.style.display = 'block';\n};\n\n\n/** HIDE ELEMENT **/\nvar hide = function ($element) {\n    $element.style.display = 'none';\n};\n\n\n/** DEVICE DETECTION **/\nvar getDevice = (function () {\n    var ua     = navigator.userAgent.toLowerCase();\n    var detect = (function (s) {\n        if (typeof (s) === 'undefined') {\n            s = ua;\n        } else {\n            ua = s.toLowerCase();\n        }\n        if (/(ipad|tablet|(android(?!.*mobile))|(windows(?!.*phone)(.*touch))|kindle|playbook|silk|(puffin(?!.*(IP|AP|WP))))/.test(ua)) {\n            return 'tablet';\n        } else if (/(mobi|ipod|phone|blackberry|opera mini|fennec|minimo|symbian|psp|nintendo ds|archos|skyfire|puffin|blazer|bolt|gobrowser|iris|maemo|semc|teashark|uzard)/.test(ua)) {\n            return 'phone';\n        } else {\n            return 'desktop';\n        }\n    });\n    var device = detect();\n    return {\n        detect     : detect,\n        device     : device,\n        isMobile   : (device !== 'desktop'),\n        isTablet   : (device === 'tablet'),\n        isDestktop : (device === 'desktop'),\n        userAgent  : ua\n    };\n}());\n\n\n/** BLT VIDEO CONTROLS CLASS\n **********************************************************/\n\nvar BLT = BLT || {};\nBLT.VideoControls = {};\n\nvar videoPlayer,\n    videoControls,\n    playButton,\n    pauseButton,\n    soundOffButton,\n    soundOnButton,\n    videoScrubber,\n    scrubHandle,\n    videoTrack,\n    videoProgress,\n    trackRect,\n    trackLeft,\n    trackRight,\n    trackWidth,\n    trackOffsetLeft,\n    scrubberLeft,\n    videoDuration;\n\n\nBLT.VideoControls.initControls = function (player) {\n    videoPlayer = player;\n    BLT.VideoControls.initVars();\n    BLT.VideoControls.addListeners();\n};\n\n\nBLT.VideoControls.initVars = function () {\n    // elements\n    videoControls = document.getElementById     ('vidControls');\n    playButton = document.getElementById        ('playButton');\n    pauseButton = document.getElementById       ('pauseButton');\n    soundOffButton = document.getElementById    ('soundOffButton');\n    soundOnButton = document.getElementById     ('soundOnButton');\n    videoScrubber = document.getElementById     ('videoScrubber');\n    scrubHandle = document.getElementById       ('scrubHandle');\n    videoTrack = document.getElementById        ('scrubTrack');\n    videoProgress = document.getElementById     ('scrubProgress');\n};\n\n\nBLT.VideoControls.addListeners = function () {\n    playButton.addEventListener ('click', BLT.VideoControls.handleControls);\n    pauseButton.addEventListener ('click', BLT.VideoControls.handleControls);\n    soundOffButton.addEventListener ('click', BLT.VideoControls.handleControls);\n    soundOnButton.addEventListener ('click', BLT.VideoControls.handleControls);\n\n    addEventListener ('hideControls', BLT.VideoControls.handleVideoEvents);\n    addEventListener ('showControls', BLT.VideoControls.handleVideoEvents);\n    addEventListener ('videoPlaying', BLT.VideoControls.handleVideoEvents);\n    addEventListener ('videoPaused', BLT.VideoControls.handleVideoEvents);\n    addEventListener ('videoMuted', BLT.VideoControls.handleVideoEvents);\n    addEventListener ('videoUnmuted', BLT.VideoControls.handleVideoEvents);\n    addEventListener ('killVideo', BLT.VideoControls.killControls);\n\n    addEventListener ('videoComplete', BLT.VideoControls.handleVideoComplete);\n    videoPlayer.addEventListener ('canplay', BLT.VideoControls.videoReady);\n\n    if (videoScrubber != null) {\n        videoTrack.addEventListener ('click', BLT.VideoControls.handleControls);\n        videoPlayer.addEventListener ('timeupdate', BLT.VideoControls.handleProgressEvent);\n\n        // scrubber\n        scrubHandle.onmousedown = function(e) {\n            videoDuration = videoPlayer.duration;\n            videoPlayer.removeEventListener ('timeupdate', BLT.VideoControls.handleProgressEvent);\n\n            document.onmousemove = function(e) {\n                if (e.clientX >= (trackLeft + scrubHandle.offsetWidth /2) && e.clientX <= trackRight) {\n                    BLT.VideoControls.setScrubberPosition (e);\n                }\n            };\n\n            document.onmouseup = function() {\n                document.onmousemove = document.onmouseup = null;\n                videoPlayer.addEventListener ('timeupdate', BLT.VideoControls.handleProgressEvent);\n            };\n        }\n    }\n};\n\nBLT.VideoControls.removeListeners = function () {\n    console.log ('REMOVE CONTROL LISTENERS');\n\n    playButton.removeEventListener ('click', BLT.VideoControls.handleControls);\n    pauseButton.removeEventListener ('click', BLT.VideoControls.handleControls);\n    soundOffButton.removeEventListener ('click', BLT.VideoControls.handleControls);\n    soundOnButton.removeEventListener ('click', BLT.VideoControls.handleControls);\n\n    removeEventListener ('hideControls', BLT.VideoControls.handleVideoEvents);\n    removeEventListener ('showControls', BLT.VideoControls.handleVideoEvents);\n    removeEventListener ('videoPlaying', BLT.VideoControls.handleVideoEvents);\n    removeEventListener ('videoPaused', BLT.VideoControls.handleVideoEvents);\n    removeEventListener ('videoMuted', BLT.VideoControls.handleVideoEvents);\n    removeEventListener ('videoUnmuted', BLT.VideoControls.handleVideoEvents);\n    removeEventListener ('killVideo', BLT.VideoControls.killControls);\n\n    removeEventListener ('videoComplete', BLT.VideoControls.handleVideoComplete);\n\n    videoTrack.removeEventListener ('click', BLT.VideoControls.handleControls);\n    videoPlayer.removeEventListener ('timeupdate', BLT.VideoControls.handleProgressEvent);\n    videoPlayer.removeEventListener ('canplay', BLT.VideoControls.videoReady);\n};\n\n\nBLT.VideoControls.videoReady = function (event) {\n    // display controls\n    show (videoControls);\n\n    videoPlayer.removeEventListener ('canplay', BLT.VideoControls.videoReady);\n\n    // store video's duration\n    videoDuration = videoPlayer.duration;\n\n    // if scrubber exists, set properties\n    if (videoScrubber != null) {\n        trackRect = videoTrack.getBoundingClientRect();\n        trackWidth = trackRect.width;\n        trackLeft = trackRect.left;\n        trackRight = trackRect.right;\n        trackOffsetLeft = videoTrack.offsetLeft;\n\n        if (typeof scrubberLeft === 'undefined') scrubberLeft = scrubHandle.offsetLeft;\n    }\n};\n\nBLT.VideoControls.handleControls = function (event) {\n    var obj = event.currentTarget.id;\n\n    switch (obj) {\n        case 'playButton':\n            dispatchEvent (BLT.Events.PLAY_VIDEO);\n            if (videoScrubber != null && videoPlayer.currentTime == 0) videoProgress.style.width = 0;\n            BLT.VideoControls.togglePlayButton (false);\n            break;\n\n        case 'pauseButton':\n            dispatchEvent (BLT.Events.PAUSE_VIDEO);\n            BLT.VideoControls.togglePlayButton (true);\n            break;\n\n        case 'soundOffButton':\n            dispatchEvent (BLT.Events.UNMUTE_VIDEO);\n            BLT.VideoControls.toggleMuteButton (false);\n            break;\n\n        case 'soundOnButton':\n            dispatchEvent (BLT.Events.MUTE_VIDEO);\n            BLT.VideoControls.toggleMuteButton (true);\n            break;\n\n        case 'scrubTrack':\n            BLT.VideoControls.setScrubberPosition (event);\n            break;\n    }\n};\n\nBLT.VideoControls.handleVideoEvents = function (event) {\n    switch (event.type) {\n        case 'videoPlaying':\n            BLT.VideoControls.togglePlayButton (false);\n            break;\n\n        case 'videoPaused':\n            BLT.VideoControls.togglePlayButton (true);\n            break;\n\n        case 'hideControls':\n            BLT.VideoControls.showHideControls ('hidden');\n            break;\n\n        case 'showControls':\n            BLT.VideoControls.showHideControls ('visible');\n            break;\n\n        case 'videoMuted':\n            BLT.VideoControls.toggleMuteButton (true);\n            break;\n\n        case 'videoUnmuted':\n            BLT.VideoControls.toggleMuteButton (false);\n            break;\n    }\n};\n\nBLT.VideoControls.showHideControls = function (state) {\n    videoControls.style.visibility = state;\n};\n\n\nBLT.VideoControls.setScrubberPosition = function (event) {\n    if (!videoDuration) videoDuration = videoPlayer.duration;\n\n    var currPos = event.clientX;\n    var newPos = currPos - trackLeft;\n    var posRatio = newPos / trackWidth;\n    var newTime = videoDuration * posRatio;\n\n    videoPlayer.currentTime = newTime;\n    scrubHandle.style.left = (newPos - (scrubHandle.offsetWidth /2)) + \"px\";\n    videoProgress.style.width = (currPos - trackLeft) + \"px\";\n};\n\n\nBLT.VideoControls.handleProgressEvent = function () {\n    if (!videoDuration) videoDuration = videoPlayer.duration;\n\n    // moves scrubber in relation to currentTime\n    var currTime = videoPlayer.currentTime;\n    var posRatio = currTime/videoDuration;\n    var posOffset = trackWidth * posRatio;\n    var scrubberPos = scrubberLeft + posOffset;\n\n    var newPos = scrubberPos - (scrubHandle.offsetWidth /2);\n    if (newPos < 0) newPos = scrubberPos;\n\n    scrubHandle.style.left = newPos + \"px\";\n    videoProgress.style.width = (scrubberPos - trackOffsetLeft) + \"px\";\n};\n\n\nBLT.VideoControls.togglePlayButton = function (playState) {\n    if (playState === true) {\n        show (playButton);\n        hide (pauseButton);\n    }\n    else {\n        hide (playButton);\n        show (pauseButton);\n    }\n};\n\n\nBLT.VideoControls.toggleMuteButton = function (muteState) {\n    if (muteState === true) {\n        show (soundOffButton);\n        hide (soundOnButton);\n    }\n    else {\n        hide (soundOffButton);\n        show (soundOnButton);\n    }\n};\n\n\nBLT.VideoControls.handleVideoComplete = function (event) {\n    BLT.VideoControls.togglePlayButton (true);\n};\n\n\nBLT.VideoControls.killControls = function () {\n    BLT.VideoControls.removeListeners();\n    hide (videoControls);\n};\n","var AD = AD || {};\n\nvar adContainer, $bgExits, $tuneIn, $film1, $film2, $film3, $film4,\n$head1, $head2, $head3, $filmStrip, $filmStripLong, $fsPink1, $fsPink2, $fsPink3;\n\n\n/** INITIALIZE AD\n *******************************************************************/\nAD.initAd = function () {\n    AD.setVars();\n    AD.addListeners();\n    AD.checkDate();\n    AD.setupAnimation();\n\n    addClass(adContainer, \"hidden\");\n\n    addClass($film2, \"hidden\");\n    addClass($film3, \"hidden\");\n    addClass($film4, \"hidden\");\n\n    TweenLite.set($fsPink1,{autoAlpha:0});\n    TweenLite.set($fsPink2,{autoAlpha:0});\n    TweenLite.set($fsPink3,{autoAlpha:0});\n\n    // INITIALIZE THE AD VENDOR API\n    initVendor();\n};\n\n// Set DOM element variables ----------------------------\nAD.setVars = function () {\n    adContainer     = getEl ('adContainer');\n    $bgExits        = getElClass ('bg-exit');\n    $tuneIn         = getEl ('tuneIn');\n    $film1          = getEl ('film1');\n    $film2          = getEl ('film2');\n    $film3          = getEl ('film3');\n    $film4          = getEl ('film4');\n    $head1          = getEl ('head1');\n    $head2          = getEl ('head2');\n    $head3          = getEl ('head3');\n    $filmStrip      = getEl ('filmStrip');\n    $filmStripLong  = getEl ('filmStripLong');\n    $fsPink1        = getEl ('fsPink1');\n    $fsPink2        = getEl ('fsPink2');\n    $fsPink3        = getEl ('fsPink3');\n};\n\n\n/** SETUP LISTENERS\n *******************************************************************/\nAD.addListeners = function () {\n    // ad events\n    addEventListener ('adReady', AD.adReady);\n    // Exit Events\n    for (var bgExitIndex = 0; bgExitIndex < $bgExits.length; bgExitIndex++) {\n        $bgExits[bgExitIndex].addEventListener('click', AD.exitHandler);\n    }\n\n};\n\n\n// Exit handler for all click-outs\nAD.exitHandler = function(event){\n    var target = (event.currentTarget) ? event.currentTarget : event.srcElement;\n    // console.info ('AD.exitHandler | target : '+target);\n    switch(target){\n        default:\n            Enabler.exit(\"GENERAL\");\n            tlFilmStrip.seek('end');\n            tlHeader.seek('end');\n            AD.stopFilmGrain();\n            break;\n    }\n};\n\n\n/** ANIMATION SETUP\n *******************************************************************/\nvar filmGrainTimer;\nvar filmFrameNumber = 1;\nvar tlFilmStrip = new TimelineLite({paused:true});\nvar tlHeader = new TimelineLite({paused:true});\n\nAD.setupAnimation = function() {\n    // setup animations here; i.e. Greensock\n    AD.headerAnim();\n    AD.filmStripAnim();\n};\n\n// Header animation\nAD.headerAnim = function() {\n    tlHeader.addLabel(\"start\", 0);\n    tlHeader.addLabel(\"end\", 2);\n\n    tlHeader.from($head1,.4,{width:0, ease: SteppedEase.config(3)}, \"start\");\n    tlHeader.from($head2,.8,{width:0, ease: SteppedEase.config(7)}, \"start+=.4\");\n    tlHeader.from($head3,.8,{width:0, ease: SteppedEase.config(7)}, \"start+=.7\");\n\n};\n\n\n// Film Strip animation\nAD.filmStripAnim = function(){\n    tlFilmStrip.addLabel(\"start\", 0);\n    tlFilmStrip.addLabel(\"hop1\", .9);\n    tlFilmStrip.addLabel(\"pink\", 1.7);\n    tlFilmStrip.addLabel(\"hop2\", 2.2);\n    tlFilmStrip.addLabel(\"hop3\", 7);\n    tlFilmStrip.addLabel(\"hop4\", 10);\n    tlFilmStrip.addLabel(\"end\", 15);\n\n    tlFilmStrip.from($filmStripLong,1,{x:-900, ease: Linear.ease, onComplete:function(){tlHeader.play()}}, \"start\");\n    // tlFilmStrip.to('#fs2',.1,{autoAlpha:0}, \"hop1\");\n    tlFilmStrip.to($filmStrip,.1,{y:-1}, \"hop1\");\n    tlFilmStrip.to($filmStrip,.2,{y:2}, \"hop1+=.1\");\n    tlFilmStrip.to($filmStrip,.1,{y:-1}, \"hop1+=.3\");\n\n    tlFilmStrip.set($fsPink1,{autoAlpha:1}, \"pink\");\n    tlFilmStrip.set($fsPink2,{autoAlpha:1}, \"pink+=.2\");\n    tlFilmStrip.set($fsPink3,{autoAlpha:1}, \"pink+=.4\");\n\n    tlFilmStrip.call(AD.stopFilmGrain, [],this,\"pink+=.8\");\n\n    tlFilmStrip.to($filmStrip,.1,{y:-1}, \"hop2\");\n    tlFilmStrip.to($filmStrip,.2,{y:2}, \"hop2+=.1\");\n    tlFilmStrip.to($filmStrip,.1,{y:-1}, \"hop2+=.3\");\n\n    tlFilmStrip.to($filmStrip,.1,{y:-1}, \"hop3\");\n    tlFilmStrip.to($filmStrip,.2,{y:2}, \"hop3+=.1\");\n    tlFilmStrip.to($filmStrip,.1,{y:-1}, \"hop3+=.3\");\n\n\n    tlFilmStrip.to($filmStrip,.1,{y:-1}, \"hop4\");\n    tlFilmStrip.to($filmStrip,.2,{y:2}, \"hop4+=.1\");\n    tlFilmStrip.to($filmStrip,.1,{y:-1}, \"hop4+=.3\");\n\n};\n\n// Film Grain Start animation\nAD.startFilmGrain = function(){\n        console.info ('switchFrame ----  filmFrameNumber = '+filmFrameNumber);\n\n        if(filmFrameNumber < 4){\n            filmFrameNumber++;\n            console.info ('filmFrameNumber = '+filmFrameNumber);\n\n            switch (filmFrameNumber){\n                case 2:\n                    addClass($film1, \"hidden\");\n                    removeClass($film2, \"hidden\");\n                    break;\n\n                case 3:\n                    addClass($film2, \"hidden\");\n                    removeClass($film3, \"hidden\");\n                    break;\n\n                case 4:\n                    addClass($film3, \"hidden\");\n                    removeClass($film4, \"hidden\");\n                    break;\n            }\n\n\n        } else{\n            filmFrameNumber = 1;\n            addClass($film4, \"hidden\");\n            removeClass($film1, \"hidden\");\n        }\n};\n\n// Film Grain Stop animation\nAD.stopFilmGrain = function(){\n    clearInterval(filmGrainTimer);\n    switch (filmFrameNumber){\n        case 1:\n            addClass($film1, \"hidden\");\n            break;\n        case 2:\n            addClass($film2, \"hidden\");\n            break;\n\n        case 3:\n            addClass($film3, \"hidden\");\n            break;\n\n        case 4:\n            addClass($film4, \"hidden\");\n            break;\n    }\n};\n\n\n/** AD READY -- CALLED ONCE VENDOR API IS READY (EVENT DISPATCHED)\n *******************************************************************/\nAD.adReady = function() {\n    console.info ('AD READY');\n\n    removeClass(adContainer, \"hidden\");\n\n    // tlHeader.play();\n    tlFilmStrip.play();\n\n    filmGrainTimer = setInterval(AD.startFilmGrain, 100);\n};\n\n//////////////////////////////////////////////////////////////////////////////\n///// Date Code ---------------\n\nAD.checkDate = function () {\n    console.log('date check');\n\n\n\n    BLT.Tunein.addDate (2018, 9, 9, 'tonight');\n    BLT.Tunein.addDate (2018, 9, 10, 'post');\n    BLT.Tunein.parseDates ();\n    // BLT.Tunein.parseDates (2018, 9, 10); // USE TO TEST DATES\n\n    switch (BLT.Tunein.currentID) {\n\n        case 'post':\n            console.info('DATE - Post');\n            addClass($tuneIn, 'Date_post');\n            break;\n\n        case 'tonight':\n            console.info('DATE - tonight');\n            addClass($tuneIn, 'Date_tonight');\n            break;\n\n        default:\n            console.info('DATE - Default');\n            break;\n    }\n};\n\n\n\n/** STARTUP\n *******************************************************************/\nwindow.load = AD.initAd();"]}